{"version":3,"sourceRoot":"src/analytics.js","sources":["src/analytics.js"],"names":["let","accountID","appName","userID","sessionID","postIntervalSeconds","granularitySec","postURL","DEFAULT_GRANULARITY_IN_SECONDS","DEFAULT_RETRY_TIME_IN_SECONDS","DEFAULT_POST_INTERVAL_SECONDS","USERID_LOCAL_STORAGE_KEY","POST_LARGE_DATA_THRESHOLD_BYTES","currentAnalyticsEvent","IS_NODE_ENV","window","DEFAULT_BASE_URL","granularityTimer","postTimer","currentQuantisedTime","Error","_createAnalyticsEvent","schemaVersion","uuid","unixTimestampUTC","Date","numEventsTotal","events","_validateCurrentState","getCurrentAnalyticsEvent","JSON","parse","stringify","_getOrCreateUserID","localUserID","localStorage","getItem","crypto","randomUUID","setItem","_getOrCreateSessionID","localSessionID","sessionStorage","Math","random","toString","substr","_setupIDs","_retryPost","eventToSend","backoffCount","console","log","setTimeout","_postCurrentAnalyticsEvent","textToSend","length","warn","fetch","method","headers","Content-Type","body","then","res","status","error","catch","_setupTimers","clearInterval","setInterval","initSession","accountIDInit","appNameInit","postIntervalSecondsInit","granularitySecInit","postBaseURLInit","_ensureAnalyticsEventExists","eventType","category","subCategory","time","valueCount","_validateEvent","count","value","_updateExistingAnalyticsEvent","index","newValue","storedValueIsCount","newValueCount","storedValueObject","analyticsEvent","eventCategory","eventCount","eventValue","timeArray","push"],"mappings":"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"}