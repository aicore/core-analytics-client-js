{"version":3,"sourceRoot":"src/analytics.js","sources":["src/analytics.js"],"names":["initAnalyticsSession","accountIDInit","appNameInit","analyticsURLInit","postIntervalSecondsInit","granularitySecInit","debug","let","accountID","appName","userID","sessionID","postIntervalSeconds","granularitySec","analyticsURL","postURL","serverConfig","DEFAULT_RETRY_TIME_IN_SECONDS","USERID_LOCAL_STORAGE_KEY","SESSION_ID_LOCAL_STORAGE_KEY","POST_LARGE_DATA_THRESHOLD_BYTES","currentAnalyticsEvent","eventData","IS_NODE_ENV","window","DEFAULT_BASE_URL","granularityTimer","postTimer","currentQuantisedTime","disabled","debugMode","debugLog","args","console","log","Error","_createAnalyticsEvent","schemaVersion","uuid","unixTimestampUTC","Date","numEventsTotal","events","_validateCurrentState","_retryPost","eventToSend","backoffCount","setTimeout","_postCurrentAnalyticsEvent","textToSend","_resetGranularityTimer","JSON","stringify","length","warn","fetch","method","headers","Content-Type","body","then","res","status","error","catch","debugError","disable","clearInterval","setInterval","_setupTimers","event","eventType","eventCategory","subCategory","eventCount","eventValue","_validateEvent","category","count","value","_ensureAnalyticsEventExists","time","valueCount","timeArray","modificationIndex","_updateExistingAnalyticsEvent","index","newValue","storedValueIsCount","newValueCount","storedValueObject","push","replace","localUserID","localStorage","getItem","crypto","randomUUID","setItem","_getOrCreateUserID","localSessionID","sessionStorage","Math","random","toString","substr","_getOrCreateSessionID","async","postIntervalSecondsInitial","granularitySecInitial","Promise","resolve","reject","configURL","serverResponse","json","err","_initFromRemoteConfig","analytics","_initData","_getCurrentAnalyticsEvent","parse","_getAppConfig"],"mappings":"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"}