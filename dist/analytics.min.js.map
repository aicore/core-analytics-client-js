{"version":3,"sourceRoot":"src/analytics.js","sources":["src/analytics.js"],"names":["initAnalyticsSession","accountIDInit","appNameInit","analyticsURLInit","postIntervalSecondsInit","granularitySecInit","let","accountID","appName","userID","sessionID","postIntervalSeconds","granularitySec","analyticsURL","postURL","serverConfig","USERID_LOCAL_STORAGE_KEY","SESSION_ID_LOCAL_STORAGE_KEY","POST_LARGE_DATA_THRESHOLD_BYTES","currentAnalyticsEvent","postIntervalSecondsInitial","granularitySecInitial","eventData","IS_NODE_ENV","window","DEFAULT_BASE_URL","granularityTimer","postTimer","currentQuantisedTime","disabled","debugLog","args","analytics","debugMode","console","log","debugError","error","Error","_createAnalyticsEvent","schemaVersion","uuid","unixTimestampUTC","Date","numEventsTotal","events","_validateCurrentState","_retryPost","eventToSend","backoffCount","setTimeout","_postCurrentAnalyticsEvent","DEFAULT_RETRY_TIME_IN_SECONDS","_postEventWithRetry","textToSend","JSON","stringify","length","warn","debugInfo","info","navigator","onLine","fetch","method","headers","Content-Type","body","then","res","status","catch","_resetGranularityTimer","disable","clearInterval","setInterval","_setupTimers","event","eventType","eventCategory","subCategory","eventCount","eventValue","_validateEvent","category","count","value","_ensureAnalyticsEventExists","time","valueCount","timeArray","modificationIndex","_updateExistingAnalyticsEvent","index","newValue","storedValueIsCount","newValueCount","storedValueObject","push","toString","replace","localUserID","localStorage","getItem","crypto","randomUUID","setItem","_getOrCreateUserID","localSessionID","sessionStorage","Math","random","substr","_getOrCreateSessionID","Promise","configURL","json","serverResponse","resolve","err","updatedServerConfig","_initData","_getCurrentAnalyticsEvent","parse","_getAppConfig","c","getRandomValues","Uint8Array"],"mappings":"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"}