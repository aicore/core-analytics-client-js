{"version":3,"sourceRoot":"src/analytics.js","sources":["src/analytics.js"],"names":["initAnalyticsSession","accountIDInit","appNameInit","analyticsURLInit","postIntervalSecondsInit","granularitySecInit","debug","let","accountID","appName","userID","sessionID","postIntervalSeconds","granularitySec","analyticsURL","postURL","serverConfig","DEFAULT_RETRY_TIME_IN_SECONDS","USERID_LOCAL_STORAGE_KEY","POST_LARGE_DATA_THRESHOLD_BYTES","currentAnalyticsEvent","eventData","IS_NODE_ENV","window","DEFAULT_BASE_URL","granularityTimer","postTimer","currentQuantisedTime","disabled","debugMode","debugLog","args","console","log","Error","_createAnalyticsEvent","schemaVersion","uuid","unixTimestampUTC","Date","numEventsTotal","events","_validateCurrentState","_retryPost","eventToSend","backoffCount","setTimeout","_postCurrentAnalyticsEvent","textToSend","_resetGranularityTimer","JSON","stringify","length","warn","fetch","method","headers","Content-Type","body","then","res","status","error","catch","debugError","disable","clearInterval","setInterval","_setupTimers","event","eventType","eventCategory","subCategory","eventCount","eventValue","_validateEvent","category","count","value","_ensureAnalyticsEventExists","time","valueCount","timeArray","modificationIndex","_updateExistingAnalyticsEvent","index","newValue","storedValueIsCount","newValueCount","storedValueObject","push","replace","localUserID","localStorage","getItem","crypto","randomUUID","setItem","_getOrCreateUserID","localSessionID","sessionStorage","Math","random","toString","substr","_getOrCreateSessionID","async","postIntervalSecondsInitial","granularitySecInitial","Promise","resolve","reject","configURL","serverResponse","json","err","_initFromRemoteConfig","analytics","_initData","_getCurrentAnalyticsEvent","parse","_getAppConfig"],"mappings":"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"}