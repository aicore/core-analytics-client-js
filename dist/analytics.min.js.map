{"version":3,"sourceRoot":"src/analytics.js","sources":["src/analytics.js"],"names":["initAnalyticsSession","accountIDInit","appNameInit","analyticsURLInit","postIntervalSecondsInit","granularitySecInit","let","accountID","appName","userID","sessionID","postIntervalSeconds","granularitySec","analyticsURL","postURL","serverConfig","USERID_LOCAL_STORAGE_KEY","SESSION_ID_LOCAL_STORAGE_KEY","POST_LARGE_DATA_THRESHOLD_BYTES","currentAnalyticsEvent","postIntervalSecondsInitial","granularitySecInitial","eventData","IS_NODE_ENV","window","DEFAULT_BASE_URL","granularityTimer","postTimer","currentQuantisedTime","disabled","debugLog","args","analytics","debugMode","console","log","debugError","error","Error","_createAnalyticsEvent","schemaVersion","uuid","unixTimestampUTC","Date","numEventsTotal","events","_validateCurrentState","_retryPost","eventToSend","backoffCount","setTimeout","_postCurrentAnalyticsEvent","DEFAULT_RETRY_TIME_IN_SECONDS","_postEventWithRetry","textToSend","JSON","stringify","length","warn","debugInfo","debugInfoLogsEnable","info","navigator","onLine","fetch","method","headers","Content-Type","body","then","res","status","catch","_resetGranularityTimer","disable","clearInterval","setInterval","_setupTimers","event","eventType","eventCategory","subCategory","eventCount","eventValue","_validateEvent","category","count","value","_ensureAnalyticsEventExists","time","valueCount","timeArray","modificationIndex","_updateExistingAnalyticsEvent","index","newValue","storedValueIsCount","newValueCount","storedValueObject","push","toString","replace","localUserID","localStorage","getItem","crypto","randomUUID","setItem","_getOrCreateUserID","localSessionID","sessionStorage","Math","random","substr","_getOrCreateSessionID","Promise","configURL","json","serverResponse","resolve","err","updatedServerConfig","_initData","_getCurrentAnalyticsEvent","parse","_getAppConfig","c","getRandomValues","Uint8Array"],"mappings":"AAwCA,SAASA,qBAAqBC,EAAeC,EAAaC,EACtDC,EAAyBC,GACzBC,IAAIC,EAAWC,EAASC,EAAQC,EAAWC,EACvCC,EAAgBC,EAAcC,EAASC,EAAa,GACxD,MAGMC,EAA2B,0BAC3BC,EAA+B,6BAC/BC,EAAkC,IACxCZ,IAAIa,EAAwB,KAC5B,IAkN+BC,EAA4BC,EAwHnDC,EA1UFC,EAAiC,oBAAXC,OAC5BlB,IAAImB,EAAmB,4BAEnBC,EACAC,EACAC,EAAuB,EACvBC,GAAW,EAEf,SAASC,KAAYC,GACbP,OAAOQ,UAAUC,WAGrBC,QAAQC,IAAI,wBAAyBJ,GASzC,SAASK,KAAcL,GACfP,OAAOQ,UAAUC,WAGrBC,QAAQG,MAAM,wBAAyBN,GAI3C,GAAGR,EACC,MAAM,IAAIe,MAAM,+CAGpB,SAASC,IACL,MAAO,CACHC,cAAe,EACfjC,UAAWA,EACXC,QAASA,EACTiC,KAAMhC,EACNC,UAAWA,EACXgC,kBAAmB,IAAIC,KACvBC,eAAgB,EAChBC,OAAQ,IAIhB,SAASC,IACL,IAAI3B,EACA,MAAM,IAAImB,MAAM,4DAiCxB,SAASS,EAAWC,GAChBA,EAAYC,cAAgBD,EAAYC,cAAgB,GAAK,EAC7DnB,yDAzFkC,GA0FEkB,EAAYC,mBAChDC,WAAW,KACPC,EAA2BH,IAC5BI,IAAuCJ,EAAYC,cAG1D,SAASI,EAAoBL,GACzB1C,IA5EkByB,EA4EduB,EAAaC,KAAKC,UAAUR,GAC7BM,EAAWG,OAASvC,GACnBgB,QAAQwB,gEAAgEJ,EAAWG;2EAGvF3B,EAAS,qCAAsCwB,EAAWG,OAAQ,KAjFhD1B,EAkFlB4B,CAAU,gBAAiBL,GAjFxB9B,OAAOQ,UAAUC,WAAaT,OAAOQ,UAAU4B,qBAC9C1B,QAAQ2B,KAAK,wBAAyB9B,GAiFtCP,OAAOsC,UAAUC,OAMrBvC,OAAOwC,MAAMlD,EAAS,CAClBmD,OAAQ,OACRC,QAAS,CAACC,eAAgB,oBAC1BC,KAAMd,IACPe,KAAKC,IACc,MAAfA,EAAIC,SAGW,MAAfD,EAAIC,OACHxB,EAAWC,GAEXd,QAAQG,MAAM,6FAEnBmC,MAAMF,IACLlC,EAAWkC,GACXvB,EAAWC,KApBXD,EAAWC,GAwBnB,SAASG,EAA2BH,GAC7BnB,IAGCmB,IACAA,EAAc7B,EACdS,EAAuB,EACvB6C,IACAtD,EAAwBoB,KAEM,IAA/BS,EAAYJ,gBAGfS,EAAoBL,IAGxB,SAASyB,EAAuBC,GACzBhD,IACCiD,cAAcjD,GACdA,EAAmB,MAEpBgD,IAGHhD,EAAmBkD,YAAY,KAC3BhD,GAA8ChB,GAChC,IAAfA,IAGP,SAASiE,EAAaH,GAClBD,EAAuBC,GACpB/C,IACCgD,cAAchD,GACdA,EAAY,MAEb+C,IAGH/C,EAAYiD,YAAYzB,EAAgD,IAApBxC,IA6HxD,SAASmE,EAAMC,EAAWC,EAAeC,EAAaC,EAAW,EAAGC,EAAW,GAC3E,IAAGtD,EAAH,CAGAuD,IA3CoBL,EA2CLA,EA3CgBM,EA2CLL,EA3CeC,EA2CAA,EA3CaK,EA2CAJ,EA3COK,EA2CKJ,EAzClE,GADArC,KACIiC,IAAcM,IAAaJ,EAC3B,MAAM,IAAI3C,MAAM,gDAEpB,GAAoB,iBAAX,GAAuBgD,EAAO,EACnC,MAAM,IAAIhD,MAAM,oDAEpB,GAAoB,iBAAX,EACL,MAAM,IAAIA,MAAM,2CAmCpBkD,CAxDiCT,EAwDLA,EAxDgBM,EAwDLL,EAxDeC,EAwDAA,EAvDtD3E,IAAIuC,EAAS1B,EAAsB0B,OACnCA,EAAOkC,GAAalC,EAAOkC,IAAc,GACzClC,EAAOkC,GAAWM,GAAYxC,EAAOkC,GAAWM,IAAa,GAC7DxC,EAAOkC,GAAWM,GAAUJ,GAAepC,EAAOkC,GAAWM,GAAUJ,IAAgB,CAEnFQ,KAAM,GAENC,WAAY,IAiDhBpF,IAAIuC,EAAS1B,EAAsB0B,OAC/B8C,EAAY9C,EAAOkC,GAAWC,GAAeC,GAAmB,KAEpE,IADgC,EAAjBU,EAAUlC,OAAUkC,EAAUA,EAAUlC,OAAO,GAAK,QACnD7B,EAAhB,CAYIgE,EAAoB/C,EAAOkC,GAAWC,GAAeC,GAAyB,WAAExB,OAAQ,EAC5FoC,CAAAA,IAhDmCC,EAgDLF,EAhDYb,EAgDOA,EAhDIM,EAgDOL,EAhDGC,EAgDYA,EAhDCK,EAgDYJ,EAhDLa,EAgDiBZ,EA/CpG7E,IAAIuC,EAAS1B,EAAsB0B,OACnC,IAAMmD,EAA+F,iBAAnEnD,EAAOkC,GAAWM,GAAUJ,GAAyB,WAAEa,GACzF,GAAGE,GAAmC,IAAbD,EACrBlD,EAAOkC,GAAWM,GAAUJ,GAAyB,WAAEa,IAAUR,OAC9D,GAAGU,GAAmC,IAAbD,EAAe,CAC3CzF,IAAI2F,EAAgB,GACpBA,EAAcF,GAAYT,EAC1BW,EAAc,GAAKpD,EAAOkC,GAAWM,GAAUJ,GAAyB,WAAEa,GAC1EjD,EAAOkC,GAAWM,GAAUJ,GAAyB,WAAEa,GAASG,OAC7D,IAAID,EAAmB,CAC1B1F,IAAI4F,EAAoBrD,EAAOkC,GAAWM,GAAUJ,GAAyB,WAAEa,GAC/EI,EAAkBH,IAAaG,EAAkBH,IAAa,GAAKT,EAEvEnE,EAAsByB,gBAAkB,OAqBxC,CAEI,GADAC,EAAOkC,GAAWC,GAAeC,GAAmB,KAAEkB,KAAKvE,GAC3C,IAAbuD,EACCtC,EAAOkC,GAAWC,GAAeC,GAAyB,WAAEkB,KAAKjB,OAC9D,CACH5E,IAAIoF,EAAa,GACjBA,EAAWP,GAAcD,EACzBrC,EAAOkC,GAAWC,GAAeC,GAAyB,WAAEkB,KAAKT,GAErEvE,EAAsByB,gBAAkB,IAQhD,IAAI3C,IAAkBC,EAClB,MAAM,IAAIoC,MAAM,6CAEpBzB,EAAeV,EAAsCA,EAnFtCiG,WAAWC,QAAQ,MAAO,IAmFgC5E,EACzElB,EAAYN,EACZO,EAAUN,EACVS,EAAsBP,GAnUgB,GAoUtCQ,EAAiBP,GAtUsB,EAuUvCS,EAAUD,EAAe,UAnPrBJ,EAnBJ,WACIH,IAAIgG,EAAcC,aAAaC,QAAQxF,GAKvC,OAJIsF,IACAA,EAAcG,OAAOC,aACrBH,aAAaI,QAAQ3F,EAA0BsF,IAE5CA,EAaEM,GACTlG,EAXJ,WACIJ,IAAIuG,EAAiBC,eAAeN,QAAQvF,GAK5C,OAJI4F,IACAA,EAAiBE,KAAKC,SAASZ,SAAS,IAAIa,OAAO,EAAG,IACtDH,eAAeH,QAAQ1F,EAA8B4F,IAElDA,EAKKK,GAoPhB/F,EAAwBoB,IACxBsC,IAjH+BzD,EAkHThB,EAlHqCiB,EAkHZhB,EA/JpC,IAAI8G,QAAQ,IACf,IAMIC,EANA5F,OAAOsC,UAAUC,QAMjBqD,EAAYvG,8BAA0CN,aAAqBC,GAC/EgB,OAAOwC,MAAMoD,GAAW/C,KAAKC,IACzB,OAAQA,EAAIC,QACZ,KAAK,IAOD,YANAD,EAAI+C,OAAOhD,KAAKiD,IACZC,EAAQD,KACT9C,MAAMgD,IACLpF,EAAW,qDAAsDoF,GACjED,EAAQ,MAGhB,KAAK,IACDnF,EAAW,iDAAkDkC,GAC7DiD,EAAQ,IACR,MACJ,QACInF,EAAW,iEAAkEkC,GAC7EiD,EAAQ,OAEb/C,MAAMgD,IACLpF,EAAW,iEAAkEoF,GAC7ED,EAAQ,OA1BRA,EAAQ,MA4CGlD,KAAKoD,IACjB1G,IAAiB,KAChBA,EAAe0G,EAEf9G,EAAsBS,GAClBL,EAAsC,yBA7NhB,GA8N1BH,EAAiBS,GAAyBN,EAAiC,oBAhOhD,EAkO3BF,EAAeE,EAA+B,kBAAKF,GAAgBY,EAEnEoD,EADAhD,GAAwC,IAA7Bd,EAAuB,UAElCe,kDAAyDD;8BAC3ClB,sBAAwCC,WAAwBC,GAC3EgB,GACCK,QAAQwB,4DAA4DnD,KAAaC,MAyGjG,IAAQc,KAAaU,UAAU0F,UAC3B5C,KAASxD,GAEbU,UAAU0F,UAAY,GAGtB1F,UAAU2F,0BA5RV,WAGI,OAFA7E,IAEOS,KAAKqE,MAAMrE,KAAKC,UAAUrC,KA0RrCa,UAAU6F,cAvIV,WACI,MAAO,CACHtH,UAAAA,EAAWC,QAAAA,EAASqB,SAAAA,EACpBY,KAAMhC,EAAQC,UAAAA,EACdC,oBAAAA,EAAqBC,eAAAA,EAAgBC,aAAAA,EAAcE,aAAAA,IAsI3DiB,UAAU8C,MAAQA,EAjYlBtD,OAAOQ,YACPR,OAAOQ,UAAY,CACf0F,UAAW,GACXzF,WAAW,SAIU,IAAlBT,OAAOiF,SACdjF,OAAOiF,OAAS,IAGd,eAAgBA,SAGlBA,OAAOC,WAAa,WAChB,OACI,CAAC,MAAM,KAAK,KAAK,KAAK,MAAML,QAAQ,SAEpCyB,IAAMA,EAAIrB,OAAOsB,gBAAgB,IAAIC,WAAW,IAAI,GAAK,IAAMF,EAAI,GAAG1B,SAAS"}