# Client schema
The `analytics client js lib` client periodically sends data to the analytics backend as JSON aggregated over a time period. The JSON format is as follows:

schema:
```json
{
 "schemaVersion" : 1,
 "appName" : "app1",
 "uuid": "u1",
 "sessionID": "s1",
 "granularitySec" : 3,
 "unixTimestampUTC" : 1643043376,
 "numEventsTotal": 25,
 "events":{
   "eventType":{
    "category":{
      "subCategory": {
       "t": [0,3],
       "v": [1,[1,3]],
       "c": [23,2]
      }
    }
   }
 }
}

```
## Fileds for schema version:1
1. `schemaVersion` : The version number for schema followed by the client. Currently, only 1 schema exists.
1. `appName`: The application name for which the event is being raised.
2. `uuid`: The unique id for the user. or the string `default` if there is no UUID/anonymous analytics is used from client.
3. `sessionID`: The unique session-id autogenerated by the client lib for each session. Will be reset for every session.
4. `granularitySec`: The minimum granularity for event recording in seconds. Repeating events within the same granularity window will be aggregated and only the count will be increased.
5. `unixTimestampUTC`: The start Unix time from which the client time is being recorded.
5. `numEventsTotal`: The sum total of all events raised from the client. This aggregates all count values `c`
6. `events` : A map of events that took place from `unixTimestamp`. The keys are nested in order `eventType`  > `category` > `subCategory`
    * Within a subcategory, `t` array specifies the `time window` in seconds from the `unixTimestamp` for which the current event is raised.
    * `v` array specifies the `values` if any that are logged as part of the event. If no value is specified, the default value `1` is used. If multiple values are logged within the same window, it is logged as an array.
    * `c` array specifies the `count` of events that happened within the time window. For Eg. in the above schema, the event that started in window 0 repeated 23 counts within the window with the default value(1).

## sample analytics event
Schema
```json
{
 "schemaVersion" : 1,
 "appName" : "brackets",
 "uuid": "u1",
 "sessionID": "s1",
 "granularitySec" : 3,
 "unixTimestampUTC" : 1643043376,
 "numEventsTotal" : 5,
 "events":{
   "platform":{
    "os":{
      "win": {
       "t": [0],
       "v": [1],
       "c": [1]
      }
    }, "performance":{
      "fileOpenTimeMs": {
       "t": [0,3,6],
       "v": [102, [50,34], 200],
       "c": [1,2,1]
      }
    }
   }
 }
}

```
The above event raises two event types :
1. (platform, os, win)
2. (platform, performance, fileOpenTimeMs)
    * at time `1643043376 + 0`, a value of `102` is registered.
    * at time `1643043376 + 3000`, two values `[50,34]` are registered.
    * at time `1643043376 + 6000`, a value of 200 is registered.

